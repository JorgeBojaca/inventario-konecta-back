(this["webpackJsonpinventario-konecta-front"]=this["webpackJsonpinventario-konecta-front"]||[]).push([[0],{194:function(e,t,a){e.exports=a(339)},199:function(e,t,a){},339:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(41),l=a.n(o),c=(a(199),a(59)),i=a(78),s=a(79),u=a(27),d=a(85),h=a(83),p=a(44),m=a.n(p),E=a(349),g=a(352),b=a(43),f=a(15),v=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={id:"",nombre_producto:"",referencia:"",precio:"",peso:"",categoria:"",stock:"",errors:{nombre_producto:!1,referencia:!1,precio:!1,peso:!1,categoria:!1,stock:!1}},r.handleSubmit=r.handleSubmit.bind(Object(u.a)(r)),r.handleChange=r.handleChange.bind(Object(u.a)(r)),r.handleIntChange=r.handleIntChange.bind(Object(u.a)(r)),r.error=r.error.bind(Object(u.a)(r)),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log();var t=this.props.match.params.id;"update"===this.props.action&&m.a.get("http://localhost:8000/api/producto/get",{params:{id:t}}).then((function(t){console.log(t),e.setState({id:t.data.id,nombre_producto:t.data.nombre_producto,referencia:t.data.referencia,precio:t.data.precio,peso:t.data.peso,categoria:t.data.categoria,stock:t.data.stock})}))}},{key:"handleChange",value:function(e){var t,a=e.target,r=a.name,n=a.value,o=this.state.errors;o[r]=!1,this.setState((t={},Object(c.a)(t,r,n),Object(c.a)(t,"errors",o),t))}},{key:"handleIntChange",value:function(e){var t,a=e.target,r=a.name,n=a.value,o=this.state.errors;(n=Number(n),o[r]=!1,n>=0)&&this.setState((t={},Object(c.a)(t,r,n),Object(c.a)(t,"errors",o),t))}},{key:"error",value:function(e){if(this.state.errors[e])return{content:"Por favor ingrese este campo",pointing:"below"}}},{key:"render",value:function(){var e;return e="create"===this.props.action?n.a.createElement("h1",null,"Crear Producto"):n.a.createElement("h1",null,"Actualizar Producto"),n.a.createElement("div",null,e,n.a.createElement(E.a,null,n.a.createElement(E.a.Input,{required:!0,label:"Nombre Producto",name:"nombre_producto",error:this.error("nombre_producto"),value:this.state.nombre_producto,onChange:this.handleChange}),n.a.createElement(E.a.Input,{required:!0,label:"Referencia",name:"referencia",error:this.error("referencia"),value:this.state.referencia,onChange:this.handleChange}),n.a.createElement(E.a.Input,{required:!0,label:"Precio",name:"precio",error:this.error("precio"),value:this.state.precio,onChange:this.handleIntChange}),n.a.createElement(E.a.Input,{required:!0,label:"Peso",name:"peso",error:this.error("peso"),value:this.state.peso,onChange:this.handleIntChange}),n.a.createElement(E.a.Input,{required:!0,label:"Categoria",name:"categoria",error:this.error("categoria"),value:this.state.categoria,onChange:this.handleChange}),n.a.createElement(E.a.Input,{required:!0,label:"Stock",name:"stock",error:this.error("stock"),value:this.state.stock,onChange:this.handleIntChange}),n.a.createElement("div",null,n.a.createElement(b.b,{to:"/"},n.a.createElement(g.a,null,"Cancelar")),n.a.createElement(g.a,{color:"blue",onClick:this.handleSubmit},"Guardar"))))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={nombre_producto:!1,referencia:!1,precio:!1,peso:!1,categoria:!1,stock:!1},r=!1;if(""===this.state.nombre_producto&&(a.nombre_producto=!0,r=!0),""===this.state.referencia&&(a.referencia=!0,r=!0),""===this.state.peso&&(a.peso=!0,r=!0),""===this.state.categoria&&(a.categoria=!0,r=!0),""===this.state.stock&&(a.stock=!0,r=!0),""===this.state.precio&&(a.precio=!0,r=!0),this.setState({errors:a}),!r){var n,o,l={nombre_producto:this.state.nombre_producto,referencia:this.state.referencia,precio:this.state.precio,peso:this.state.peso,categoria:this.state.categoria,stock:this.state.stock};"create"===this.props.action?(n="api/producto/create",o="post"):(n="api/producto/update",l.id=this.state.id,o="put"),console.log(l),m.a[o]("http://localhost:8000/"+n,l).then((function(e){"create"===t.props.action?(console.log("Agregados correctamente"),t.props.history.push("/")):(console.log("Actualizado correctamente"),t.props.history.push("/")),t.setState({nombre_producto:"",referencia:"",precio:"",peso:"",categoria:"",stock:""})})).catch((function(e){console.log(e.response.data)}))}}}]),a}(n.a.Component),C=Object(f.f)(v),k=a(351),j=a(55),O=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={productos:[]},r.handleEdit=r.handleEdit.bind(Object(u.a)(r)),r.handleDelete=r.handleDelete.bind(Object(u.a)(r)),r.handleSale=r.handleSale.bind(Object(u.a)(r)),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;m.a.get("http://localhost:8000/api/producto/getAll").then((function(t){console.log(t),e.setState({productos:t.data})}))}},{key:"handleEdit",value:function(e){this.props.history.push("/edit")}},{key:"handleDelete",value:function(e,t){var a=this;m.a.delete("http://localhost:8000/api/producto/delete",{params:{id:e}}).then((function(e){var r=a.state.productos;r.splice(t,1),a.setState({productos:r})}))}},{key:"handleSale",value:function(e,t){var a=this,r=this.state.productos;r[t].stock>0&&(r[t].stock-=1,m.a.post("http://localhost:8000/api/producto/sale",{id:e}).then((function(e){r[t].fecha_ultima_venta=e.data,a.setState({productos:r})})).catch((function(e){console.log(e.response.data)})))}},{key:"render",value:function(){var e,t=this,a=[];if(this.state.productos.length>0){for(var r=function(e){var r=t.state.productos[e];a.push(n.a.createElement(k.a.Row,{key:r.id},n.a.createElement(k.a.Cell,null,r.nombre_producto),n.a.createElement(k.a.Cell,null,r.referencia),n.a.createElement(k.a.Cell,null,r.precio),n.a.createElement(k.a.Cell,null,r.peso),n.a.createElement(k.a.Cell,null,r.categoria),n.a.createElement(k.a.Cell,null,r.stock),n.a.createElement(k.a.Cell,null,r.fecha_creacion),n.a.createElement(k.a.Cell,null,r.fecha_ultima_venta),n.a.createElement(k.a.Cell,{textAlign:"center"},n.a.createElement(g.a,{disabled:0===r.stock,size:"mini",color:"green",onClick:function(){return t.handleSale(r.id,e)}},"Vender")),n.a.createElement(k.a.Cell,{textAlign:"center"},n.a.createElement(b.b,{to:{pathname:"/edit/"+r.id}},n.a.createElement(g.a,{title:"Editar",size:"mini",icon:!0,color:"blue"},n.a.createElement(j.a,{name:"edit"}))),n.a.createElement(g.a,{title:"Eliminar",size:"mini",icon:!0,color:"red",onClick:function(){return t.handleDelete(r.id,e)}},n.a.createElement(j.a,{name:"delete"})))))},o=0;o<this.state.productos.length;o++)r(o);e=n.a.createElement(k.a,{compact:!0,celled:!0},n.a.createElement(k.a.Header,null,n.a.createElement(k.a.Row,null,n.a.createElement(k.a.HeaderCell,null,"Nombre"),n.a.createElement(k.a.HeaderCell,null,"Referencia"),n.a.createElement(k.a.HeaderCell,null,"Precio"),n.a.createElement(k.a.HeaderCell,null,"Peso"),n.a.createElement(k.a.HeaderCell,null,"Categoria"),n.a.createElement(k.a.HeaderCell,null,"Stock"),n.a.createElement(k.a.HeaderCell,null,"Fecha Creaci\xf3n"),n.a.createElement(k.a.HeaderCell,null,"\xdaltima Venta"),n.a.createElement(k.a.HeaderCell,null),n.a.createElement(k.a.HeaderCell,null))),n.a.createElement(k.a.Body,null,a))}else e=n.a.createElement("h3",null,"No hay productos registrados.");return n.a.createElement("div",null,n.a.createElement("h1",null,"Inventario de Productos"),n.a.createElement(b.b,{to:"/create"},"Agregar Producto"),e)}}]),a}(n.a.Component),y=a(348);var S=function(){return n.a.createElement("div",null,n.a.createElement(y.a,null,n.a.createElement(b.a,null,n.a.createElement("div",null,n.a.createElement(f.c,null,n.a.createElement(f.a,{path:"/create"},n.a.createElement(C,{action:"create"})),n.a.createElement(f.a,{path:"/edit/:id"},n.a.createElement(C,{action:"update"})),n.a.createElement(f.a,{path:"/"},n.a.createElement(O,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(338);l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[194,1,2]]]);
//# sourceMappingURL=main.38fcee49.chunk.js.map